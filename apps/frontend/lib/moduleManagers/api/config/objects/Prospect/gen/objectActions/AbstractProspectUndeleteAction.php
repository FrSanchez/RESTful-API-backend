<?php
namespace Api\Config\Objects\Prospect\Gen\ObjectActions;

use Api\Exceptions\ApiException;
use Api\Framework\FileInput;
use Api\Gen\Representations\ProspectRepresentation;
use Api\Objects\ObjectActions\ObjectAction;
use Api\Objects\ObjectActions\ObjectActionContext;
use Api\Representations\Representation;
use ApiErrorLibrary;
use Exception;
use RESTClient;
use RuntimeException;

/**
 * DO NOT MODIFY! This is generated by the API generation suite. Use "baker-api-gen" to generate a new version.

 */
abstract class AbstractProspectUndeleteAction implements ObjectAction
{
	/**
	 * Override this method with any validation logic. This method is executed before the {@see executeActionWithArgs}
	 * method.
	 *
	 * @param ObjectActionContext $objectActionContext The current context in which the object action is being executed.
	 * @param string|null $email
	 * @param int|null $id
	 * @throws Exception
	 */
	public function validateWithArgs(
		ObjectActionContext $objectActionContext,
		?string $email,
		?int $id
	): void
	{
		// override this method to validate the arguments
	}

	/**
	 * Override this method with the logic to execute when the object action is invoked.
	 *
	 * @param ObjectActionContext $objectActionContext The current context in which the object action is being executed.
	 * @param string|null $email
	 * @param int|null $id
	 * @return ProspectRepresentation|null
	 */
	public abstract function executeActionWithArgs(
		ObjectActionContext $objectActionContext,
		?string $email,
		?int $id
	): ?ProspectRepresentation;

	final public function executeObjectAction(
		ObjectActionContext $objectActionContext,
		Representation $bodyRepresentation,
		?FileInput $fileInput
	): ?Representation {
		if (!$bodyRepresentation instanceof \Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation) {
			throw new RuntimeException("Unexpected type for body representation. Expected \Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation.");
		}

		$this->validateRequiredProperties($bodyRepresentation);
		$this->validateNonNullableProperties($bodyRepresentation);

		$this->validateWithArgs(
			$objectActionContext,
			$bodyRepresentation->getIsEmailSet() ? $bodyRepresentation->getEmail() : null,
			$bodyRepresentation->getIsIdSet() ? $bodyRepresentation->getId() : null
		);
		return $this->executeActionWithArgs(
			$objectActionContext,
			$bodyRepresentation->getIsEmailSet() ? $bodyRepresentation->getEmail() : null,
			$bodyRepresentation->getIsIdSet() ? $bodyRepresentation->getId() : null
		);
	}

	/**
	 * @param \Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation $representation
	 */
	private function validateRequiredProperties(\Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation $representation): void
	{
		$invalidProperties = [];


		if (!empty($invalidProperties)) {
			throw new ApiException(
				ApiErrorLibrary::API_ERROR_MISSING_PROPERTY,
				implode(', ', $invalidProperties),
				RESTClient::HTTP_BAD_REQUEST
			);
		}
	}

	/**
	 * @param \Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation $representation
	 */
	private function validateNonNullableProperties(\Api\Gen\Representations\ProspectUndeleteObjectActionInputRepresentation $representation): void
	{
		$invalidProperties = [];

		if ($representation->getIsEmailSet() && is_null($representation->getEmail())) {
			$invalidProperties[] = 'email';
		}

		if ($representation->getIsIdSet() && is_null($representation->getId())) {
			$invalidProperties[] = 'id';
		}


		if (!empty($invalidProperties)) {
			throw new ApiException(
				ApiErrorLibrary::API_ERROR_INVALID_PROPERTY,
				implode(', ', $invalidProperties) . ". These properties should not be null.",
				RESTClient::HTTP_BAD_REQUEST
			);
		}
	}
}
